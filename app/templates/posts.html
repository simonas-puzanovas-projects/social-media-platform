{% extends "index.html" %}

{% block title %}Posts - Social Media Platform{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='posts.css') }}">
<div class="dashboard-container">
    <div class="dashboard-content">
        <!-- Posts Feed -->
        <div class="posts-container">
            {% if posts %}
                <div class="posts-grid">
                    {% for post_data in posts %}
                    {% set post = post_data[0] %}
                    {% set username = post_data[1] %}
                    <div class="post-item" data-post-id="{{ post.id }}">
                        <div class="post-header">
                            <div class="post-author">
                                <div class="author-avatar">👤</div>
                                <div class="author-info">
                                    <span class="author-name">{{ username }}</span>
                                    <span class="post-time">{{ post.created_at.strftime('%B %d, %Y') }}</span>
                                </div>
                            </div>
                            {% if post.owner == session.user_id %}
                            <div class="post-actions">
                                <button class="btn-delete" onclick="deletePost({{ post.id }})" title="Delete Post">🗑️</button>
                            </div>
                            {% endif %}
                        </div>

                        <div class="post-content">
                            <img src="{{ url_for('static', filename=post.image_path) }}" alt="Post image" class="post-image">
                        </div>

                        <div class="post-footer">
                            <div class="post-stats">
                                <span class="post-likes">❤️ 0</span>
                                <span class="post-comments">💬 0</span>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {%elif session.username == profile_user%}
                <div class="no-posts">
                    <div class="no-posts-icon">📷</div>
                    <h4>No posts yet</h4>
                    <p>Be the first to share an image!</p>
                    <button class="btn btn-primary" onclick="toggleImageUpload()">
                        Upload Your First Image
                    </button>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='posts.js') }}"></script>
{% endblock %}