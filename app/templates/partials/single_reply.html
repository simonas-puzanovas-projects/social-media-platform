<div class="comment-item reply-item" id="comment-{{ reply.id }}" data-comment-id="{{ reply.id }}">
    <div class="comment-header">
        <span class="comment-author">{{ reply.user.username }}</span>
        <span class="comment-time">{{ reply.created_at.strftime('%b %d, %Y') }}</span>
    </div>
    <div class="comment-content">{{ reply.content }}</div>
    <div class="comment-actions">
        <button class="comment-reply-btn" data-comment-id="{{ reply.id }}" data-post-id="{{ post_id }}">Reply</button>
        {% if reply.user_id == current_user_id %}
        <button class="comment-delete-btn" hx-delete="/api/comment/{{ reply.id }}" hx-target="#comment-{{ reply.id }}" hx-swap="outerHTML" hx-confirm="Delete?">Delete</button>
        {% endif %}
    </div>

    <div class="reply-form-container" id="reply-form-{{ reply.id }}" style="display: none;">
        <form class="reply-form" hx-post="/api/comment/{{ post_id }}" hx-target="#replies-{{ reply.id }}" hx-swap="beforeend">
            <input type="hidden" name="parent_id" value="{{ reply.id }}">
            <input type="text" name="comment" placeholder="Write a reply..." required>
            <button type="submit">Reply</button>
            <button type="button" class="cancel-reply" data-comment-id="{{ reply.id }}">Cancel</button>
        </form>
    </div>

    <div class="comment-replies" id="replies-{{ reply.id }}" style="display: none;"></div>
</div>
